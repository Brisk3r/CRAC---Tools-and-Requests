<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarence Valley Aquatic Certificate Generator</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Load Babel for handling React code in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Custom Print Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap');
        
        .font-signature {
            font-family: 'Great Vibes', cursive;
        }
        
        .font-fun {
            font-family: 'Fredoka', sans-serif;
        }

        @media print {
            @page {
                size: landscape;
                margin: 0;
            }
            body {
                margin: 0;
                padding: 0;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                background-color: white !important;
            }
            .print-hidden {
                display: none !important;
            }
            .print-visible {
                display: block !important;
                width: 100vw;
                height: 100vh;
                position: absolute;
                top: 0;
                left: 0;
            }
        }

        .text-shadow-sm {
            text-shadow: 1px 1px 0px rgba(0,0,0,0.1);
        }
        
        /* Subtle transition for bubble colors */
        .bubble-transition {
            transition: background-color 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- ICONS ---
        const IconBase = ({ d, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d} /></svg>
        );
        const Printer = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>);
        const User = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>);
        const Award = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>);
        const PenTool = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19 7-7 3 3-7 7-3-3z"></path><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="m2 2 7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>);
        const MapPin = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>);
        const CheckSquare = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>);
        const Square = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>);
        const ToggleLeft = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle></svg>);
        const ToggleRight = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle></svg>);
        const CheckCircle = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>);
        const Clock = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>);

        // --- DYNAMIC BUBBLES COMPONENT ---
        const Bubbles = ({ levelKey }) => {
            // Map levels to specific color palettes
            const palettes = {
                default: ['bg-blue-200', 'bg-sky-200', 'bg-indigo-200'],
                Starfish: ['bg-orange-200', 'bg-yellow-200', 'bg-red-100'],
                Seahorses: ['bg-yellow-300', 'bg-orange-100', 'bg-amber-200'],
                Crabs: ['bg-red-200', 'bg-orange-200', 'bg-rose-100'],
                Octopus: ['bg-purple-300', 'bg-fuchsia-200', 'bg-violet-200'],
                Turtle: ['bg-green-300', 'bg-emerald-200', 'bg-lime-200'],
                Seal: ['bg-slate-300', 'bg-gray-200', 'bg-blue-200'],
                Frog: ['bg-green-400', 'bg-lime-300', 'bg-emerald-200'],
                Otters: ['bg-teal-300', 'bg-cyan-200', 'bg-sky-200'],
                Stingray: ['bg-gray-400', 'bg-slate-300', 'bg-blue-200'],
                Sharks: ['bg-blue-300', 'bg-slate-300', 'bg-indigo-200'],
                Dolphins: ['bg-cyan-300', 'bg-sky-300', 'bg-blue-200'],
                Marlin: ['bg-blue-400', 'bg-indigo-300', 'bg-sky-300'],
                Orcas: ['bg-slate-400', 'bg-gray-300', 'bg-slate-200'],
            };

            const colors = palettes[levelKey] || palettes.default;

            return (
                <div className="absolute inset-0 overflow-hidden pointer-events-none">
                    {/* Large bubbles with opacity logic handled here */}
                    <div className={`absolute top-[15%] left-[5%] w-32 h-32 rounded-full ${colors[0]} opacity-40 animate-pulse bubble-transition`}></div>
                    <div className={`absolute top-[60%] right-[10%] w-48 h-48 rounded-full ${colors[1]} opacity-50 bubble-transition`}></div>
                    <div className={`absolute bottom-[20%] left-[15%] w-24 h-24 rounded-full ${colors[2]} opacity-40 bubble-transition`}></div>
                    
                    {/* Smaller scattered bubbles */}
                    <div className={`absolute top-[30%] left-[20%] w-8 h-8 rounded-full ${colors[1]} opacity-30 bubble-transition`}></div>
                    <div className={`absolute top-[40%] right-[30%] w-12 h-12 rounded-full ${colors[0]} opacity-30 bubble-transition`}></div>
                    <div className={`absolute bottom-[40%] left-[50%] w-16 h-16 rounded-full ${colors[2]} opacity-30 bubble-transition`}></div>
                </div>
            );
        };

        const GoldSeal = ({ mascotName, imgUrl, status }) => {
            const isCompleted = status === 'completed';
            const ribbonColor = isCompleted ? 'bg-indigo-600' : 'bg-orange-500';

            return (
                <div className="relative w-48 h-48 flex items-center justify-center mb-8">
                
                {/* Ribbon Tails (Outward Pointing) */}
                <div className="absolute flex items-center justify-center w-full h-full z-0">
                    <div 
                        className={`absolute w-14 h-28 ${ribbonColor} shadow-md`} 
                        style={{ 
                            clipPath: 'polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%)',
                            transform: 'rotate(90deg) translateY(-50px) translateX(0px)',
                            transformOrigin: 'center top'
                        }}
                    ></div>
                    <div 
                        className={`absolute w-14 h-28 ${ribbonColor} shadow-md`} 
                        style={{ 
                            clipPath: 'polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%)',
                            transform: 'rotate(-90deg) translateY(-50px) translateX(0px)',
                            transformOrigin: 'center top'
                        }}
                    ></div>
                </div>

                {/* Main Seal Body */}
                <div className="relative w-40 h-40 rounded-full bg-gradient-to-br from-yellow-200 via-yellow-400 to-yellow-600 shadow-xl flex items-center justify-center z-10 border-4 border-yellow-100">
                    
                    {/* Inner Ridge */}
                    <div className="absolute inset-1 rounded-full border-2 border-yellow-600 border-opacity-30"></div>
                    <div className="absolute inset-2 rounded-full border border-yellow-100 border-opacity-50"></div>

                    {/* Inner Circle background */}
                    <div className="w-32 h-32 rounded-full bg-gradient-to-br from-yellow-100 to-yellow-300 flex items-center justify-center overflow-hidden shadow-inner relative">
                        
                        {/* Mascot Image - POP Style */}
                        {imgUrl && (
                        <img 
                            src={imgUrl} 
                            alt="mascot"
                            className="w-31 h-31 object-contain relative z-20"
                            style={{ 
                                filter: 'drop-shadow(0px 2px 3px rgba(0,0,0,0.2))',
                            }} 
                        />
                    )}
                    
                    {/* Shine effect overlay */}
                    <div className="absolute -top-10 -left-10 w-20 h-20 bg-white opacity-40 blur-xl rounded-full pointer-events-none z-10"></div>
                    </div>
                </div>

                </div>
            );
        };

        const CertificateContent = ({ theme, data, levelData, isBlankMode, completionStatus }) => {
            const isCRAC = theme.style === 'modern';
            const isCompleted = completionStatus === 'completed';

            return (
                <div className={`relative w-full h-full flex flex-col ${theme.colors.background}`}>
                
                {/* Background Decorative Elements */}
                {isCRAC ? (
                    // CRAC Background
                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                    <div className="absolute top-0 right-0 w-[400px] h-[816px] bg-slate-100 transform -skew-x-12 translate-x-32" />
                    <div className="absolute top-0 right-0 w-[200px] h-[816px] bg-slate-900 transform -skew-x-12 translate-x-32 opacity-10" />
                    <div className="absolute bottom-0 left-0 w-full h-4 bg-cyan-600" />
                    <div className="absolute bottom-4 left-0 w-full h-12 bg-slate-900" />
                    </div>
                ) : (
                    // YCP Background (Blue Wave Header + DYNAMIC Bubbles on White)
                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                        {/* Blue Header Wave */}
                        <div className="absolute top-0 left-0 right-0 h-40 bg-sky-400 z-0" style={{ borderRadius: '0 0 50% 50% / 0 0 20% 20%' }}></div>
                        <div className="absolute top-0 left-0 right-0 h-36 bg-sky-500 z-0 shadow-lg" style={{ borderRadius: '0 0 50% 50% / 0 0 25% 25%' }}></div>
                        
                        {/* Bubbles - Passing the level key to control colors */}
                        <Bubbles levelKey={data.levelKey} />
                        
                        {/* Simple bottom accent */}
                        <div className="absolute bottom-0 left-0 right-0 h-4 bg-yellow-400"></div>
                    </div>
                )}

                {/* Main Content Container */}
                <div className="relative z-10 flex-1 flex flex-col px-8 py-6 h-full box-border">
                    
                    {/* Header */}
                    <div className={`flex justify-between items-start mb-4 h-28 pt-2`}>
                        <div className="flex items-center gap-4 max-w-[70%]">
                            {/* Logo Container Bubble (White Zone) */}
                            <div className="bg-white p-3 rounded-2xl shadow-md border-2 border-white inline-block relative z-20">
                                <div className={`relative ${isCRAC ? 'h-16' : 'h-24'} flex items-center`}>
                                    <img 
                                        src={theme.logoUrl} 
                                        alt={`${theme.name} Logo`} 
                                        className="h-full w-auto object-contain mix-blend-multiply"
                                    />
                                </div>
                            </div>
                            
                            {/* Text for YCP sits on the Blue Wave in White */}
                            {!isCRAC && (
                                <div className="text-white drop-shadow-md pt-2">
                                    <h1 className="text-3xl font-fun font-bold uppercase tracking-wide leading-none">
                                        Congratulations!
                                    </h1>
                                    <p className="text-lg opacity-90 font-medium italic">
                                        From The YCP Team.
                                    </p>
                                </div>
                            )}

                            {/* CRAC Text */}
                            {isCRAC && (
                                <div>
                                    <p className="text-xl font-medium mt-1 pl-1 text-cyan-600 uppercase tracking-widest">
                                        {theme.subhead}
                                    </p>
                                </div>
                            )}
                        </div>

                        {/* Council Logo Area */}
                        <div className="text-right mt-2 z-20">
                            <div className={`flex flex-col items-end ${!isCRAC ? 'text-white opacity-90' : 'text-gray-500 opacity-60'}`}>
                                <span className="text-xs font-bold uppercase tracking-widest mb-1">Provided by</span>
                                <span className="font-bold">Clarence Valley Council</span>
                            </div>
                        </div>
                    </div>

                    {/* Body Content */}
                    <div className="flex-1 flex flex-col items-center w-full min-h-0 justify-start pt-6">
                        
                        {/* Top Section: Student Name */}
                        <div className="w-full text-center mb-6">
                            <p className={`text-xl text-gray-500 font-medium mb-1 uppercase tracking-widest`}>
                            This certifies that
                            </p>
                            
                            {isBlankMode ? (
                                <div className={`w-3/4 mx-auto border-b-4 h-16 mt-2 ${isCRAC ? 'border-cyan-500' : 'border-yellow-400'}`}></div>
                            ) : (
                                <h2 className={`text-5xl font-bold mb-1 pb-1 inline-block px-12 ${isCRAC ? 'text-slate-800 border-b-4 border-cyan-500 font-sans' : 'text-sky-600 border-b-4 border-yellow-400 font-fun tracking-wide'}`}>
                                    {data.studentName || "Student Name"}
                                </h2>
                            )}
                        </div>

                        {/* Middle Section: Level & Skills */}
                        <div className="w-full grid grid-cols-12 gap-8 mb-2 flex-1 items-start">
                            
                            {/* Left: Level Title & Description */}
                            <div className="col-span-4 flex flex-col items-center justify-start text-center pt-4">
                                <p className="text-xl text-gray-600 mb-2">
                                    {isCompleted ? "Has successfully completed" : "Is developing skills in"}
                                </p>
                                <h3 className={`text-4xl font-bold mb-2 ${theme.colors.accent} ${!isCRAC && 'font-fun'}`}>
                                    {levelData.label || levelData.mascot}
                                </h3>
                                <p className="text-gray-500 text-sm mb-4">
                                    in our Learn to Swim Program
                                </p>
                                
                                {/* Gold Seal */}
                                <div>
                                    <GoldSeal mascotName={levelData.mascot} imgUrl={levelData.imgUrl} status={completionStatus} />
                                </div>
                            </div>

                            {/* Right: Skills List */}
                            <div className={`col-span-8 p-6 rounded-xl border ${isCRAC ? 'bg-slate-50 border-slate-200' : theme.colors.checklist + ' shadow-sm'} relative z-10`}>
                                <h4 className={`font-bold uppercase tracking-wide mb-3 border-b pb-2 ${isCRAC ? 'text-slate-800 border-slate-300' : 'text-sky-700 border-yellow-300 font-fun'}`}>
                                    Skills Achieved
                                </h4>
                                <ul className="grid grid-cols-1 gap-2">
                                    {levelData.skills.map((skill, index) => (
                                        <li key={index} className="flex items-start gap-3">
                                            <div className={`mt-1 flex-shrink-0 ${isCRAC ? 'text-cyan-600' : 'text-sky-500'}`}>
                                                {isBlankMode || !isCompleted ? (
                                                    <Square className="w-5 h-5" />
                                                ) : (
                                                    <CheckSquare className="w-5 h-5" />
                                                )}
                                            </div>
                                            <span className={`text-lg leading-snug ${isCRAC ? 'text-slate-700' : 'text-gray-700'}`}>
                                                {skill}
                                            </span>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        </div>

                        {/* Optional Comment Section */}
                        {!isBlankMode && data.comment && (
                            <div className="w-3/4 text-center mb-6 h-12 flex items-center justify-center">
                                <p className={`text-lg italic font-medium ${isCRAC ? 'text-slate-600' : 'text-sky-800'}`}>
                                    "{data.comment}"
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Footer */}
                    <div className="mt-auto pt-2 flex justify-between items-end border-t border-gray-100 relative z-20 pb-8">
                    
                    {/* Instructor Signature */}
                    <div className="text-left w-1/3">
                        <p className="text-sm text-gray-400 uppercase tracking-widest font-bold mb-1">Instructor</p>
                        {isBlankMode ? (
                            <div className={`h-10 border-b-2 ${isCRAC ? 'border-slate-300' : 'border-sky-300'}`}></div>
                        ) : (
                            <div className={`h-10 border-b-2 flex items-end ${isCRAC ? 'border-slate-300' : 'border-sky-300'}`}>
                                <span className={`text-2xl font-signature font-medium ${isCRAC ? 'text-slate-800' : 'text-sky-700'}`}>
                                    {data.instructor}
                                </span>
                            </div>
                        )}
                    </div>

                    {/* Date */}
                    <div className="text-right w-1/3">
                        <p className="text-sm text-gray-400 uppercase tracking-widest font-bold mb-1">Date</p>
                        {isBlankMode ? (
                            <div className={`h-10 border-b-2 ${isCRAC ? 'border-slate-300' : 'border-sky-300'}`}></div>
                        ) : (
                            <div className={`h-10 border-b-2 flex items-end justify-end ${isCRAC ? 'border-slate-300' : 'border-sky-300'}`}>
                            <span className="text-xl text-gray-600">
                                {new Date(data.date).toLocaleDateString('en-AU', { day: 'numeric', month: 'long', year: 'numeric' })}
                            </span>
                            </div>
                        )}
                    </div>
                    </div>
                </div>
                </div>
            );
        };

        const CertificateGenerator = () => {
            const [facility, setFacility] = useState('YCP'); 
            const [isBlankMode, setIsBlankMode] = useState(false);
            const [completionStatus, setCompletionStatus] = useState('completed'); 
            const [formData, setFormData] = useState({
                studentName: '',
                levelKey: 'Octopus', 
                date: new Date().toISOString().split('T')[0],
                instructor: '',
                comment: 'Great work achieving your goals!',
            });

            // Data
            const curriculum = {
                "Starfish": {
                    mascot: "Starfish",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/5ee9a3ee-0acb-4ee1-a763-2106b66dcc51/Starfish.png?showarchived=true",
                    age: "6-18 months",
                    skills: ["Build water confidence", "Safe entries and exits", "Breath control & bubbles", "Submersions"]
                },
                "Seahorses": {
                    mascot: "Seahorses",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/9b2dd944-9729-4992-9c0a-8b201a697569/Seahorse.png?showarchived=true",
                    age: "18 months - 3 years",
                    skills: ["Build water confidence", "Safe entries and exits", "Breath control & bubbles", "Submersions"]
                },
                "Crabs": {
                    mascot: "Crabs",
                    label: "Crabs",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/67c46a95-c2a5-418c-a9c2-68b2bc6fb65c/Crab.png?showarchived=true",
                    age: "2-3 years",
                    skills: ["Safe entries and exits", "Float with aid", "Breath control & bubbles", "Sculling", "Water safety"]
                },
                "Octopus": {
                    mascot: "Octopus",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/96e630e5-4781-4cbd-911b-90bdaefa1aef/Octopus.png?showarchived=true",
                    age: "3-5 years",
                    skills: ["Safe entries and exits", "Submersion & opening eyes underwater", "Streamline torpedo", "Dog paddle independently (3-5m)", "Independent float"]
                },
                "Turtle": {
                    mascot: "Turtle",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/f36439aa-eacf-4734-b9d5-b193c8ca3c1f/Turtle.png?showarchived=true",
                    skills: ["Safe pool entries and exits", "Independent float", "Strong kick on back (3-5m)", "Streamline torpedo", "4 Freestyle arms in streamline position"]
                },
                "Seal": {
                    mascot: "Seal",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/2ebaa479-7ea5-4f9c-942e-06d687edac6b/Seal.png?showarchived=true",
                    skills: ["Strong correct kick", "Side breathing (bubble, bubble, breathe)", "Freestyle streamline position (5-7m)", "Backstroke arms (5-7m)", "Safe pool entries and exits"]
                },
                "Frog": {
                    mascot: "Frog",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/ce97510c-8b31-4975-9a49-d315519a8c6b/Frog.png?showarchived=true",
                    skills: ["Bilateral breathing freestyle (15m)", "Strong backstroke kick", "Backstroke arms", "Breaststroke kick", "Safe pool entries and exits"]
                },
                "Otters": {
                    mascot: "Otters",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/fad639a4-802e-4c54-853c-ab89fccf862e/Otter.png?showarchived=true",
                    skills: ["Increase student stamina", "Correct freestyle bilateral breathing (20m)", "Correct backstroke (strong kick & body position)", "Breaststroke kick", "Safe pool entries and exits"]
                },
                "Stingray": {
                    mascot: "Stingray",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/4d411fbf-43af-4ec7-8854-4a7067382ca5/Stingray.png?showarchived=true",
                    skills: ["Increase student stamina", "Correct freestyle bilateral breathing (25m)", "Correct backstroke (strong kick & body position)", "Breaststroke kick", "Safe pool entries and exits"]
                },
                "Sharks": {
                    mascot: "Sharks",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/3e882375-a54c-4ecc-a2f1-c67c697e4e8b/Shark.png?showarchived=true",
                    skills: ["Correct technique - bilateral freestyle (50m)", "Correct backstroke technique (50m)", "Correct breaststroke timing & coordination (50m)", "Introduction to starts, turns, and finishes", "Introduction to Butterfly kick"]
                },
                "Dolphins": {
                    mascot: "Dolphins",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/e1068812-c61e-44e3-80b5-a76d0d843e74/Dolphin.png?showarchived=true",
                    skills: ["Correct technique - bilateral freestyle (75m)", "Correct backstroke technique (75m)", "Correct breaststroke timing & coordination (75m)", "Butterfly kick and stroke drills", "Starts, turns, and finishes"]
                },
                "Marlin": {
                    mascot: "Marlin",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/47ac8eb4-09ac-49fd-8df4-d98d8a91b3bc/Marlin.png?showarchived=true",
                    skills: ["Correct technique - bilateral freestyle (100m)", "Correct backstroke technique (100m)", "Correct breaststroke timing & coordination (100m)", "Complete Butterfly stroke", "Starts, turns, and finishes"]
                },
                "Orcas": {
                    mascot: "Orcas",
                    label: "Orcas (Mini Squad)",
                    imgUrl: "https://clarencevalley.admin.opencities.com/files/e4eeee4c-4129-427c-9f6d-76eb510e562c/Orcas.png?showarchived=true",
                    skills: ["Introduction to squad training", "Distances up to 200m", "Endurance building", "Advanced stroke correction"]
                }
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData((prev) => ({
                    ...prev,
                    [name]: value,
                }));
            };

            const handlePrint = () => {
                window.print();
            };

            const themes = {
                CRAC: {
                    name: "Clarence Regional Aquatic Centre",
                    subhead: "The Clarence Valley's Premier Aquatic Facility",
                    logoUrl: "https://clarencevalley.admin.opencities.com/files/7e5544c3-9b09-40bf-be11-70d0dbd36b19/CRAC-Large-Wordmark.png?showarchived=true",
                    colors: {
                        primary: "bg-slate-900",
                        secondary: "bg-cyan-600",
                        accent: "text-cyan-600",
                        border: "border-slate-900",
                        background: "bg-white",
                        checklist: "bg-slate-50 border-slate-200",
                        watermark: "opacity-5"
                    },
                    address: "Cnr Oliver & Turf St, Grafton NSW 2460",
                    style: "modern"
                },
                YCP: {
                    name: "Yamba Community Pool",
                    subhead: "Your Local Friendly Community Haven",
                    logoUrl: "https://clarencevalley.admin.opencities.com/files/984e134f-954b-4dcf-9f46-626273df7b29/YCP-Wordmark-Full-Horizontal.png?showarchived=true",
                    colors: {
                        primary: "bg-sky-500",
                        secondary: "bg-yellow-400",
                        accent: "text-sky-600",
                        border: "border-sky-500",
                        background: "bg-white", // White background for printing
                        checklist: "bg-yellow-50 border-yellow-200", // Yellow for the box
                        watermark: "opacity-10"
                    },
                    address: "Angourie Rd, Yamba NSW 2464",
                    style: "friendly"
                }
            };

            const currentTheme = themes[facility];
            const currentLevelData = curriculum[formData.levelKey];

            return (
                <div className="min-h-screen bg-gray-100 font-sans">
                    {/* Control Panel - Hidden when printing */}
                    <div className="print-hidden">
                        <header className="bg-white shadow-sm border-b border-gray-200">
                        <div className="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center">
                            <h1 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                            <Award className="w-6 h-6 text-indigo-600" />
                            Certificate Generator
                            </h1>
                            <div className="flex gap-2">
                            <button 
                                onClick={() => setFacility('CRAC')}
                                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                                facility === 'CRAC' 
                                    ? 'bg-slate-900 text-white shadow-md' 
                                    : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'
                                }`}
                            >
                                Clarence Regional
                            </button>
                            <button 
                                onClick={() => setFacility('YCP')}
                                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                                facility === 'YCP' 
                                    ? 'bg-sky-500 text-white shadow-md' 
                                    : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'
                                }`}
                            >
                                Yamba Community
                            </button>
                            </div>
                        </div>
                        </header>

                        <main className="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                            
                            {/* Input Form */}
                            <div className="lg:col-span-4 space-y-6">
                            <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                
                                <h2 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                <PenTool className="w-5 h-5 text-gray-500" />
                                Details
                                </h2>
                                
                                <div className="space-y-4">

                                {/* Status Selection */}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <div className="flex bg-gray-100 rounded-lg p-1">
                                        <button
                                            onClick={() => setCompletionStatus('completed')}
                                            className={`flex-1 py-1.5 px-3 rounded-md text-sm font-medium transition-all ${
                                                completionStatus === 'completed'
                                                ? 'bg-white text-indigo-600 shadow-sm ring-1 ring-black/5'
                                                : 'text-gray-500 hover:text-gray-700'
                                            }`}
                                        >
                                            Completed
                                        </button>
                                        <button
                                            onClick={() => setCompletionStatus('progress')}
                                            className={`flex-1 py-1.5 px-3 rounded-md text-sm font-medium transition-all ${
                                                completionStatus === 'progress'
                                                ? 'bg-white text-indigo-600 shadow-sm ring-1 ring-black/5'
                                                : 'text-gray-500 hover:text-gray-700'
                                            }`}
                                        >
                                            In Progress
                                        </button>
                                    </div>
                                </div>

                                {/* Blank Mode Toggle */}
                                <label className="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg border border-gray-100 cursor-pointer hover:bg-gray-100 transition-colors">
                                    <input
                                        type="checkbox"
                                        checked={isBlankMode}
                                        onChange={(e) => setIsBlankMode(e.target.checked)}
                                        className="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                    />
                                    <div className="flex flex-col">
                                        <span className="text-sm font-medium text-gray-900">Blank Certificate Mode</span>
                                        <span className="text-xs text-gray-500">Hide details for hand-writing</span>
                                    </div>
                                </label>
                                
                                {/* Level Selection Dropdown */}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Level / Program</label>
                                    <div className="relative">
                                        <span className="absolute left-3 top-2.5 text-gray-400">
                                            <Award className="h-5 w-5" />
                                        </span>
                                        <select
                                            name="levelKey"
                                            value={formData.levelKey}
                                            onChange={handleInputChange}
                                            className="pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2 bg-white"
                                        >
                                            {Object.keys(curriculum).map((key) => (
                                                <option key={key} value={key}>
                                                    {curriculum[key].label || key}
                                                </option>
                                            ))}
                                        </select>
                                    </div>
                                </div>

                                {/* Student Name (Disabled in Blank Mode) */}
                                <div className={isBlankMode ? 'opacity-50 pointer-events-none' : ''}>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Student Name</label>
                                    <div className="relative">
                                    <span className="absolute left-3 top-2.5 text-gray-400">
                                        <User className="h-5 w-5" />
                                    </span>
                                    <input
                                        type="text"
                                        name="studentName"
                                        value={formData.studentName}
                                        onChange={handleInputChange}
                                        placeholder="e.g. Sarah Smith"
                                        className="pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2"
                                    />
                                    </div>
                                </div>

                                <div className={`grid grid-cols-2 gap-4 ${isBlankMode ? 'opacity-50 pointer-events-none' : ''}`}>
                                    <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Date</label>
                                    <input
                                        type="date"
                                        name="date"
                                        value={formData.date}
                                        onChange={handleInputChange}
                                        className="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2"
                                    />
                                    </div>
                                    <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Instructor</label>
                                    <input
                                        type="text"
                                        name="instructor"
                                        value={formData.instructor}
                                        onChange={handleInputChange}
                                        placeholder="Instructor Name"
                                        className="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2"
                                    />
                                    </div>
                                </div>

                                <div className={isBlankMode ? 'opacity-50 pointer-events-none' : ''}>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Encouraging Note</label>
                                    <textarea
                                    name="comment"
                                    rows="2"
                                    value={formData.comment}
                                    onChange={handleInputChange}
                                    className="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2"
                                    />
                                </div>
                                </div>

                                <div className="mt-6 pt-6 border-t border-gray-100">
                                <button
                                    onClick={handlePrint}
                                    className="w-full flex justify-center items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors shadow-sm"
                                >
                                    <Printer className="w-5 h-5" />
                                    Print Certificate
                                </button>
                                <p className="text-xs text-center text-gray-500 mt-2">
                                    Tip: Set layout to "Landscape" and disable "Headers and footers" in print settings.
                                </p>
                                </div>
                            </div>
                            </div>

                            {/* Preview Area (Visible on Screen) */}
                            <div className="lg:col-span-8">
                            <div className="bg-gray-200 p-4 rounded-xl border border-gray-300 overflow-auto">
                                {/* Scale wrapper for preview */}
                                <div className="bg-white shadow-xl mx-auto origin-top transform transition-transform duration-200" 
                                    style={{ width: '1056px', height: '816px', transform: 'scale(0.65)', transformOrigin: 'top left', marginBottom: '-30%' }}>
                                    <CertificateContent theme={currentTheme} data={formData} levelData={currentLevelData} isBlankMode={isBlankMode} completionStatus={completionStatus} />
                                </div>
                            </div>
                            </div>
                        </div>
                        </main>
                    </div>

                    {/* Print View - Only visible when printing */}
                    <div className="hidden print-visible">
                        <div className="w-[1122px] h-[794px] mx-auto overflow-hidden">
                            <CertificateContent theme={currentTheme} data={formData} levelData={currentLevelData} isBlankMode={isBlankMode} completionStatus={completionStatus} />
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CertificateGenerator />);
    </script>
</body>
</html>
